## 2026-01-08: Verified & fixed test infrastructure

PRD items: setup 1-9 (all setup tasks verified complete)

Changes:
- Fixed vitest.setup.ts: use relative path for MSW server import, set onUnhandledRequest to "bypass"
- Fixed e2e/home.spec.ts: updated tests to match actual UI (Link vs Button, PIN on /join page)
- Updated PRD: marked all 9 setup tasks as passes: true

Key notes:
- Use `bun run test` not `bun test` (latter uses bun's native runner, not vitest)
- All 48 unit tests pass, all 6 E2E tests pass
- typecheck + lint both pass

Files changed:
- vitest.setup.ts
- e2e/home.spec.ts
- plans/prd.json

## 2026-01-08: Verified Spotify OAuth login

PRD items: authentication #1 (Host can log in with Spotify OAuth)

Verification:
- Started dev server, navigated to home page
- Clicked "Login with Spotify" button
- Confirmed redirect to Spotify OAuth with correct scopes (streaming, user-read-email, user-read-private, playlist-read-private)
- Callback URL correctly configured: /api/auth/callback/spotify
- PKCE code challenge in place for security

No code changes needed - feature was already implemented:
- src/lib/auth.ts: Better Auth with Spotify provider
- src/lib/auth-client.ts: signIn/signOut/useSession exports
- src/components/user-menu.tsx: Login button + session display
- src/components/spotify-login-button.tsx: Spotify OAuth trigger
- src/app/api/auth/[...all]/route.ts: Auth API handler
- src/db/schema.ts: user/session/account tables

Files changed:
- plans/prd.json (marked authentication #1 as passes: true)
